#

```console
dd if=/dev/zero of=./testfile bs=1M count=10
```

- `dd` - утилита командной строки для копирования и преобразования файлов. `dd` может использоваться для множества целей, включая копирование разделов, создание файлов определенного размера, и преобразование данных.

- `if` - означает "input file" (входной файл).

- `/dev/zero` - специальный файл в Unix-подобных системах, который обеспечивает столько нулей (0x00), сколько нужно при чтении из него. Таким образом, `if=/dev/zero` указывает `dd` читать данные из `/dev/zero`.

- `of` - означает "output file" (выходной файл). 

- `./testfile` - путь к файлу, в который `dd` будет записывать данные. Если файл не существует, он будет создан. Если файл уже существует, он будет перезаписан.

- `bs` - означает "block size" (размер блока). 

- `1M` - указывает, что размер блока для операции копирования составляет 1 мегабайт. `dd` будет читать и записывать данные блоками по 1 мегабайту за раз.

- `count` - определяет, сколько блоков будет скопировано.

- `10` - означает, что `dd` должен скопировать 10 блоков. Учитывая, что размер блока установлен в 1 мегабайт, это означает, что общий размер созданного файла будет 10 мегабайт.s

#

```console
FROM ubuntu:20.04
ENV testenv1=env1
#создадим пользователя
RUN groupadd --gid 2000 user && useradd --uid 2000 --gid 2000 --shell /bin/bash --create-home user
#посмотрим состояние кэша apt до установки nginx
RUN ls -lah /var/lib/apt/lists/
RUN apt-get update -y && apt-get install nginx -y
#Повторно проверим состояние кэша apt
RUN ls -lah /var/lib/apt/lists/
#Очистим кзш
RUN rm -rf /var/lib/apt/lists/*
RUN ls -lah /var/lib/apt/lists/
#Скопируем наш тестовый файл
COPY testfile .
#Сменим права
RUN chown user:user testfile
USER user
CMD ["sleep infinity"]
```

- `FROM ubuntu:20.04` - базовый образ. В данном случае используется Ubuntu версии 20.04.

- `ENV testenv1=env1` - устанавливает переменную окружения testenv1 со значением env1 внутри образа.

- `RUN groupadd --gid 2000 user && useradd --uid 2000 --gid 2000 --shell /bin/bash --create-home user` - создаёт новую группу user с GID (идентификатором группы) 2000 и нового пользователя user с UID (идентификатором пользователя) 2000, принадлежащего этой группе, с домашним каталогом и оболочкой bash.

- `RUN ls -lah /var/lib/apt/lists/` - показывает содержимое каталога /var/lib/apt/lists/, где хранится кэш списка пакетов для APT.

- `RUN apt-get update -y && apt-get install nginx -y` - обновляет список пакетов APT и устанавливает веб-сервер Nginx.

- `RUN ls -lah /var/lib/apt/lists/` - снова проверяет содержимое каталога /var/lib/apt/lists/, чтобы увидеть изменения после установки Nginx.

- `RUN rm -rf /var/lib/apt/lists/*` - удаляет содержимое каталога /var/lib/apt/lists/, очищая кэш APT. Это делается для уменьшения размера образа.

- `RUN ls -lah /var/lib/apt/lists/` - проверяет, что каталог /var/lib/apt/lists/ теперь пуст после его очистки.

- `COPY testfile .` - копирует файл testfile из контекста сборки (обычно это директория, откуда запускается команда сборки образа) в текущую рабочую директорию внутри образа.

- `RUN chown user:user testfile` - изменяет владельца файла testfile на пользователя user.

- `USER user` - устанавливает пользователя user для последующих инструкций RUN, CMD и ENTRYPOINT.

- `CMD ["sleep infinity"]` - устанавливает команду по умолчанию, которая будет выполнена при запуске контейнера. В данном случае, это бесконечный сон (sleep infinity), что означает, что контейнер будет продолжать работать, пока его явно не остановят.

# 

```console
docker history rbm-dkr-11:default --no-trunc
```

- `history` - команда используется для отображения истории слоёв, из которых состоит Docker образ. Каждый слой представляет собой набор изменений относительно предыдущего слоя, и вместе они формируют полный образ.

- `--no-trunc` - флаг предотвращает усечение вывода. По умолчанию, Docker может обрезать некоторую информацию в выводе команды history для удобства отображения. Использование --no-trunc гарантирует, что вы увидите полный, необрезанный вывод, включая полные идентификаторы слоёв, полные команды, которые были использованы для создания каждого слоя, и другие детали.

# 